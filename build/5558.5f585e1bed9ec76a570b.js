"use strict";(self.webpackChunkimc2025=self.webpackChunkimc2025||[]).push([[5558],{490:(e,t,a)=>{a.r(t),a.d(t,{default:()=>T});var s=a(9066),r=a(1083),i=a(6540),n=a(9785),l=a(7767),o=a(5846),c=a(6328),d=a(6538),p=a(9156),m=a(6827),u=a(5680),g=a(5058),h=a(476),b=a(6645),y=a(4567),x=a(6505),f=a(2337),j=a(4668),w=a(3975),_=a(408),N=a(7762),D=a(4976),k=a(914),S=a(4157),v=a(4972),M=a(4493),C=a(7234),A=a(4848);const T=()=>{const e=(0,l.zy)(),t="1"===new URLSearchParams(e.search).get("debug"),[a,T]=(0,i.useState)({teamEmailSent:null,participantEmailSent:null,error:null}),[B,E]=(0,i.useState)(""),[I,V]=(0,i.useState)(!1),[F,P]=(0,i.useState)(null),[R,O]=(0,i.useState)(0),[$,H]=(0,i.useState)(""),[W,z]=(0,i.useState)(1),[q,G]=(0,i.useState)(null),[Z,L]=(0,i.useState)(0),{workshops:Q,paymentMethods:U,registrationTypes:Y,loading:J,sessions:K,error:X}=(0,M.Q)(),{participant:ee,loading:te,error:ae}=(0,v.D)(F,0,!0),se=J||te||I,re=ae||X||!!B,{control:ie,register:ne,handleSubmit:le,formState:{errors:oe},getValues:ce,setValue:de,trigger:pe,watch:me}=(0,n.mN)(),ue=(e=>{if(!e)return null;const t=new Date(e),a=new Date;let s=a.getFullYear()-t.getFullYear();const r=a.getMonth()-t.getMonth();return(r<0||0===r&&a.getDate()<t.getDate())&&s--,s})(me("dob")),ge=null!==ue&&ue<16,he=new Date<new Date(N.p.deadlines.early_birds);return(0,i.useEffect)((()=>{if(!ee||!$)return;(async()=>{try{const e=(0,C.Q1)(ee,Q,U,Y,K),t=(0,C.KB)(ee,Q,U,Y,K,$),a=ee.workshops?.filter((e=>"1"===e.attending))||[],s="vperlerin@gmail.com".split(",").map((e=>({email:e,name:"BCC Recipient"}))),r=a.map((async e=>(0,k.Z)({subject:"Workshop Registration",message:`Hey ${e.responsible_name.split(" ")[0]},<br><br>\n                      ${ee.participant.first_name} ${ee.participant.last_name} (${ee.participant.email})\n                      has just registered for the "${e.title}" (ONSITE).<br>See you,<br>V./<br>`,to:e.responsible_email,toName:e.responsible_name,fromName:"IMC 2025",replyTo:ee.participant.email,replyName:ee.participant.first_name+" "+ee.participant.last_name,bcc:s}))),i=await(0,k.Z)({subject:"New Onsite IMC Registration",message:e,to:"vperlerin@gmail.com",toName:"IMC 2025 Team",fromName:"IMC 2025",replyTo:"no-reply@imc.net",replyName:"Do not reply",bcc:s}),n=await(0,k.Z)({subject:"New Onsite IMC Registration",message:t,to:ee.participant.email,toName:`${ee.participant.first_name} ${ee.participant.last_name}`,fromName:"IMC 2025",replyTo:"no-reply@imc.net",replyName:"Do not reply",bcc:s});await Promise.all(r),T({teamEmailSent:i,participantEmailSent:n,error:null})}catch(e){T({teamEmailSent:null,participantEmailSent:null,error:e.message||"Failed to send emails"})}})()}),[ee,Q,$]),se?(0,A.jsx)(b.A,{}):(0,A.jsxs)(y.A,{title:"Register On site",showRegBtn:!1,children:[re&&(0,A.jsx)("div",{className:"alert alert-danger",children:re}),8===W&&(0,A.jsxs)(A.Fragment,{children:[ae&&!se&&(0,A.jsxs)("div",{className:"alert alert-danger fw-bolder",children:["Database access error. We are sorry, but we couldn't properly record your registration. Please try again or  "," ",(0,A.jsx)(D.N_,{"aria-label":"Contact",to:"/contact",title:"Contact",children:"contact us"})," "," for assistance."]}),ee&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("h2",{children:N.p.thank_you}),q&&!B&&(0,A.jsx)("div",{className:"alert alert-success fw-bolder",children:q}),(0,A.jsxs)("p",{className:"fw-bolder",children:["We just sent you an email with some instructions. This email contains a summary of your information as well as the password required to eventually update your travel details and your contributions (talks & posters). If you do not receive this email within the next 20 minutes"," ",(0,A.jsx)(D.N_,{"aria-label":"Contact",to:"/contact",title:"Contact",children:"contact us"})," "," immediately."]}),(0,A.jsxs)("div",{className:"d-flex flex-column flex-md-row gap-3",children:[(0,A.jsxs)("div",{className:"flex-grow-1",children:[(0,A.jsx)("p",{className:"fw-bolder text-danger",children:"The IMC fee is due without any delay."}),"paypal"===(0,c.g)(ee.participant.payment_method_id,U)?(0,A.jsxs)("div",{className:"mb-3",children:[(0,A.jsx)("p",{children:"Click the button below to pay immediately with Paypal."}),(0,A.jsx)(x.A,{amount:Z+R,year:N.p.year})]}):(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("p",{children:(0,A.jsxs)("strong",{children:["  Please, transfer the total amount of ",Z,"€ to confirm your registration immediately."]})}),(0,A.jsxs)("blockquote",{className:"border rounded-2 p-3",children:["International Meteor Organization, Jozef Mattheessensstraat 60, 2540 Hove, Belgium",(0,A.jsx)("br",{}),"Bank account at BNP Paribas Fortis Bank Belgium",(0,A.jsx)("br",{}),"BIC bank code: GEBABEBB",(0,A.jsx)("br",{}),"IBAN account number: BE30 0014 7327 5911",(0,A.jsx)("br",{}),"e-mail: treasurer@imo.net"]})]})]}),(0,A.jsx)(f.A,{isOnline:!1,conferenceData:N.p,participantData:ee,workshops:Q,registrationTypes:Y,paymentMethods:U})]})]})]}),!ee&&!se&&(0,A.jsxs)("form",{onSubmit:le((async e=>{V(!0),E(null),G(null);try{const t="https://imc2025.imo.net/php/api/register_onsite.php",a={...e,is_early_bird:he.toString(),is_online:"false",talks:e.talks||[],posters:e.posters||[],total_due:Z.toFixed(2),paypal_fee:R.toFixed(2)},s=await r.A.post(t,a,{headers:{"Content-Type":"application/json"}});s.data.success?(G(`Registration successful! (ID: ${s.data.participant_id}) `),P(s.data.participant_id),H(s.data.password)):(E(s.data.message||"Something went wrong."),G("Registration successful but we couldn't send you an email"))}catch(e){E("Failed to submit the form. Please try again.")}finally{V(!1)}})),className:"d-flex flex-grow-1 flex-column position-relative",children:[I&&(0,A.jsx)(b.A,{}),(0,A.jsx)("input",{name:"is_early_bird",type:"hidden",value:he,...ne("is_early_bird")}),(0,A.jsx)("input",{name:"is_online",type:"hidden",value:"false",...ne("is_online")}),1===W&&(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)("p",{className:"border rounded-2 p-3",children:[(0,A.jsx)("b",{children:"People who need an invitation letter for Visa"})," must send their request without any delay to imc",N.p.year,"@imo.net. Please, provide your legal private domicile or professional address, passport number and the address of the ",N.p.consulate," where your visa application will be submitted."]}),new Date<new Date(N.p.deadlines.early_birds)&&(0,A.jsxs)("p",{className:"d-flex border rounded-2 p-3 border-info text-info gap-2 mb-5",children:[(0,A.jsx)(_.tP6,{className:s.A.warning}),(0,A.jsxs)("span",{children:[(0,A.jsxs)("span",{className:"d-block fw-bolder",children:["Hurry up! After ",(0,o.Lu)(N.p.deadlines.early_birds),", a late booking fee of ",N.p.costs.after_early_birds,"€ is added to the registration fee"]}),(0,A.jsx)("small",{children:"— because the early birds got the discount, and the latecomers just get the worms (and a fee :)."})]})]})]}),1===W&&(0,A.jsx)(h.A,{register:ne,errors:oe,isDebugMode:t,step:W,stepTotal:8,setValue:de,trigger:pe}),2===W&&N.p?.workshops?.length>0&&(0,A.jsx)(w.A,{conferenceData:N.p,register:ne,errors:oe,isDebugMode:t,step:W,stepTotal:8,setValue:de,trigger:pe,watch:me,workshops:Q}),3===W&&(0,A.jsx)(p.A,{conferenceData:N.p,register:ne,errors:oe,isDebugMode:t,step:W,stepTotal:8,setValue:de,trigger:pe}),4===W&&(0,A.jsx)(u.A,{conferenceData:N.p,control:ie,register:ne,isDebugMode:t,errors:oe,step:W,stepTotal:8,getValues:ce,setValue:de,sessions:K,trigger:pe,watch:me}),5===W&&(0,A.jsx)(d.A,{conferenceData:N.p,control:ie,register:ne,isDebugMode:t,isEarlyBird:he,paymentMethods:U,errors:oe,registrationTypes:Y,step:W,stepTotal:8,setValue:de,trigger:pe}),6===W&&(0,A.jsx)(g.A,{conferenceData:N.p,register:ne,errors:oe,isDebugMode:t,step:W,stepTotal:8,setValue:de,trigger:pe,watch:me,control:ie}),7===W&&(0,A.jsx)(m.A,{register:ne,errors:oe,isDebugMode:t,isUnder16:ge,showGdpr:!0,step:W,stepTotal:8,setValue:de,trigger:pe}),8===W&&!q&&(0,A.jsx)(j.A,{isOnline:!1,getValues:ce,isEarlyBird:he,conferenceData:N.p,setTotal:L,setPaypalFee:O,showInfo:!q,workshops:Q,registrationTypes:Y,paymentMethods:U,watch:me}),(0,A.jsx)("div",{className:"mt-auto pt-3",children:(0,A.jsxs)("div",{className:"d-flex gap-3 justify-content-end",children:[W>1&&(0,A.jsxs)("button",{className:"btn btn-outline-primary fw-bolder d-inline-flex align-items-center gap-2",type:"button",onClick:()=>z(W-1),children:[(0,A.jsx)(S.SnO,{style:{strokeWidth:"110px"}})," Back"]}),W<8&&(0,A.jsxs)("button",{className:"btn btn-outline-primary fw-bolder d-inline-flex align-items-center gap-2",type:"button",onClick:async()=>{await pe()&&z(W+1)},children:["Continue ",(0,A.jsx)(S.dH8,{style:{strokeWidth:"110px"}})]}),8===W&&(0,A.jsx)("button",{className:"btn btn-primary fw-bolder",type:"submit",children:"Submit"})]})})]})]})}},9066:(e,t,a)=>{a.d(t,{A:()=>s});const s={root:"index-module__root--arE76","is-admin":"index-module__is-admin--SeEAz",warning:"index-module__warning--GHhh2"}}}]);