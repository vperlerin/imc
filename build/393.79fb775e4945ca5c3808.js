"use strict";(self.webpackChunkimc2025=self.webpackChunkimc2025||[]).push([[393],{7647:(e,t,s)=>{s.d(t,{A:()=>H});const a="index-module__pageContain--r6_E2";var n=s(6942),i=s.n(n),l=s(3464);const r="index-module__header--RVFFD",d="index-module__title--gLVc5";var o=s(4157);const c="300px",m="index-module__menuBtn--iHux0",p="index-module__menuCloseBtn--jCTip",h="index-module__menuIcon--i9Mwv",u="index-module__swipeWrap--a2OL4",x="index-module__menuOpenOverlay--caMms",j="index-module__menu--veCcg",f="index-module__active--EYt3Y",b="index-module__footer--O9Npd",_="index-module__menuItem--eqnJw",g="index-module__menuItemTitle--O6gep",N="index-module__active--Hl_ax",y="index-module__caret--U_US2",v="index-module__rotate--pnUGY",w="index-module__menuItemsHolder--aPOed";var k=s(6540),A=s(4848);const S=k.forwardRef(((e,t)=>{let{children:s,className:a,goTo:n=null,isLinkActive:l,title:r,url:d=null}=e;const[o,c]=(0,k.useState)(l),[m,p]=(0,k.useState)("0px"),h=(0,k.useRef)(null);(0,k.useEffect)((()=>{s&&p(o?`${h.current.scrollHeight}px`:"0px")}),[s,o,h]);const u=e=>(0,A.jsx)("div",{className:i()(e.className,o&&v),children:(0,A.jsx)("svg",{viewBox:"0 0 320 512",xmlns:"http://www.w3.org/2000/svg",children:(0,A.jsx)("path",{d:"M285.476 272.971L91.132 467.314c-9.373 9.373-24.569 9.373-33.941 0l-22.667-22.667c-9.357-9.357-9.375-24.522-.04-33.901L188.505 256 34.484 101.255c-9.335-9.379-9.317-24.544.04-33.901l22.667-22.667c9.373-9.373 24.569-9.373 33.941 0L285.475 239.03c9.373 9.372 9.373 24.568.001 33.941z",fill:e.fill})})});return(0,A.jsxs)("div",{className:i()(_,"d-flex flex-column",a),ref:t,children:[(0,A.jsxs)("a",{className:i()(g,"d-flex justify-content-between w-100 align-items-center px-3",l&&N),href:d||void 0,onClick:e=>{e.preventDefault(),s?c(!o):n&&d&&n(d)},children:[(0,A.jsx)("span",{className:"d-flex align-items-center",children:(0,A.jsx)("b",{children:r})}),s&&(0,A.jsx)(u,{className:y})]}),s&&(0,A.jsx)("div",{className:w,ref:h,style:s&&{maxHeight:`${m}`},children:s})]})}));var C=s(8321),P=s(8983),F=s(1448),L=s(7767),M=s(4976);const E=[{title:"Dashboard",link:"/admin/dashboard"},{title:"Participants",link:"/admin/participants",subLinks:[{title:"Onsite",link:"/admin/participants/onsite"},{title:"Online",link:"/admin/participants/online"},{title:"Workshops",link:"/admin/participants/workshops"}]},{title:"Contributions",link:"/admin/contributions",subLinks:[{title:"Talks",link:"/admin/contributions/talks"},{title:"Posters",link:"/admin/contributions/posters"}]},{title:"Accomodations",link:"/admin/accomodations"},{title:"Export",link:"/admin/export"}];var I=s(1280),O=s(1083);const D=parseInt(c,10)||250,T=e=>{let{cd:t}=e;const[s,a]=(0,k.useState)(!1),[n,l]=(0,k.useState)(!0),r=(0,F.wA)(),d=(0,L.zy)(),c=(0,L.Zp)(),[_,g]=(0,C.useSpring)((()=>({right:-D,config:{tension:350,friction:30}})));(0,k.useEffect)((()=>(s?(l(!1),g.start({right:0}),document.body.classList.add("overflow-hidden"),document.documentElement.classList.add("overflow-hidden")):(g.start({right:-D,onRest:()=>l(!0)}),document.body.classList.remove("overflow-hidden"),document.documentElement.classList.remove("overflow-hidden")),()=>{document.body.classList.remove("overflow-hidden"),document.documentElement.classList.remove("overflow-hidden")})),[s,g]),(0,k.useEffect)((()=>{const e=()=>{a(!1)};return window.addEventListener("resize",e),()=>{window.removeEventListener("resize",e)}}),[]);const N=()=>{a((e=>!e))},y=e=>{c(e),N()};return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsx)("button",{className:m,onClick:N,children:(0,A.jsx)(o.RAm,{className:h})}),!n&&(0,A.jsx)("div",{className:i()(x),onClick:N,onMouseDown:I._v,onTouchStart:I._v}),(0,A.jsx)(C.animated.div,{className:i()(u),style:_,children:(0,A.jsxs)("div",{className:i()(j,"d-flex flex-column h-100"),children:[(0,A.jsx)("button",{className:p,onClick:N,children:(0,A.jsx)(o.ipV,{className:h})}),(0,A.jsxs)("div",{className:"mb-3",children:[(0,A.jsxs)("div",{className:"m-3 text-center",children:[(0,A.jsxs)("h4",{className:"fw-bolder m-0",children:["IMC ",t.year]}),(0,A.jsx)("small",{className:"m-0",children:"ADMIN AREA"})]}),E.map((e=>{const t=d.pathname.startsWith(e.link)||e.subLinks&&e.subLinks.some((e=>d.pathname.startsWith(e.link)));if(!e.hideFromMenu)return(0,A.jsx)(S,{className:"py-2",isLinkActive:t,goTo:y,title:e.title,url:e.link,children:e.subLinks&&(0,A.jsx)(A.Fragment,{children:e.subLinks.map((e=>{const t=d.pathname===e.link;return(0,A.jsx)(M.N_,{"aria-label":e.title,onClick:N,to:e.link,className:i()(t&&f),title:e.title,children:e.title},e.link)}))})},e.link)}))]}),(0,A.jsx)("div",{className:i()(b,"mt-auto"),children:(0,A.jsxs)("div",{className:"d-flex flex-column justify-content-center mb-3 p-3 gap-2 px-4",children:[(0,A.jsx)("button",{"aria-label":"Public site",className:"btn btn-outline-success px-3 fw-bolder",onClick:()=>y("/"),title:"Public site",children:"Public site"}),(0,A.jsx)("button",{"aria-label":"Logout",className:"btn btn-outline-danger px-3 fw-bolder",onClick:async()=>{await O.A.get("https://imc2025.imo.net/php/logout.php",{withCredentials:!0}),r(P.I2.logout()),y("/")},title:"Logout",children:"Logout"})]})})]})})]})};var z=s(7762);const W=()=>{const e=`${z.p.name} ${z.p.year}`;return(0,A.jsxs)("div",{className:"d-flex align-items-center justify-content-between border-bottom",children:[(0,A.jsx)(T,{cd:z.p}),(0,A.jsx)("nav",{className:"p-0 flex-wrap","aria-label":"Main navigation",children:(0,A.jsx)("div",{className:i()(r,"d-flex flex-row flew-wrap px-2 mb-1 justify-content-between"),children:(0,A.jsxs)(M.N_,{"aria-label":"Admin",className:i()("d-flex align-items-center text-dark text-decoration-none gap-2",d),to:"/admin/dashboard",title:"Admin",children:[(0,A.jsx)("img",{src:l,alt:e,className:"rounded-circle border border-2 p-1"}),(0,A.jsxs)("div",{className:"d-flex flex-column",children:[(0,A.jsxs)("h1",{className:"m-0 fw-bolder",children:[z.p.name," ",z.p.year]}),(0,A.jsx)("h2",{className:"m-0 d-none d-md-block",children:"ADMIN AREA"})]})]})})})]})};var $=s(5902),R=s(1351);const B="breadcrumb-module__nav--atkeN",V=e=>{let{links:t=[]}=e;return(0,A.jsx)("nav",{"aria-label":"breadcrumb",className:B,children:(0,A.jsxs)("ol",{className:i()("breadcrumb"),children:[(0,A.jsx)("li",{className:"breadcrumb-item lh-0",children:(0,A.jsx)(M.N_,{to:"/admin/dashboard",children:(0,A.jsx)(R.M14,{className:"me-1"})})}),t.map(((e,s)=>(0,A.jsx)("li",{className:i()("breadcrumb-item",{active:s===t.length-1}),"aria-current":s===t.length-1?"page":void 0,children:s===t.length-1?e.name:(0,A.jsx)(M.N_,{to:e.url,children:e.name})},s)))]})})},H=e=>{let{breadcrumb:t=[],title:s="",rightContent:n,children:l}=e;const r=s?`${s} | ${z.p.name_display} ${z.p.year}`:`${z.p.name_display} ${z.p.year}`;return(0,A.jsxs)(A.Fragment,{children:[(0,A.jsxs)($.mg,{children:[(0,A.jsx)("title",{children:r}),(0,A.jsx)("meta",{name:"robots",content:"noindex"})]}),(0,A.jsxs)("div",{className:i()(a,"position-relative"),children:[(0,A.jsx)(W,{}),(0,A.jsxs)("div",{className:"d-flex flex-row",children:[(0,A.jsx)(T,{cd:z.p}),(0,A.jsxs)("div",{className:"mx-md-4 my-3 h-100 flex-grow-1 d-flex flex-column px-3 px-md-0",children:[0!==t.length&&(0,A.jsx)(V,{links:t}),(0,A.jsxs)("div",{className:"d-flex justify-content-between align-items-center",children:[s&&(0,A.jsx)("h2",{children:s}),n&&(0,A.jsx)("div",{children:n})]}),l]})]})]})]})}},3393:(e,t,s)=>{s.r(t),s.d(t,{default:()=>x});var a=s(7647),n=s(1083),i=s(6540),l=s(6645),r=s(8232),d=s(6942),o=s.n(d),c=(s(1358),s(4848));const m=e=>Math.round(100*(e+(.034*e+.35)/.966))/100,p=e=>{let{isOnline:t,conferenceData:s,participantData:a,workshops:n,registrationTypes:i,paymentMethods:l}=e;if(!a||!a.participant)return(0,c.jsx)("div",{className:"alert alert-danger",children:"No participant data available."});const{participant:r,accommodation:d,extra_options:o,contributions:p=[],payments:h=[]}=a,u=d?.registration_type||"Unknown",x=parseFloat(d?.registration_price||0)+("0"===r.is_early_bird?s.costs.after_early_birds:0),j=n.map((e=>({title:e.title,price:t?parseFloat(e.price_online):parseFloat(e.price)}))),f=j.reduce(((e,t)=>e+t.price),0),b="1"===o?.buy_tshirt?parseFloat(s.costs.tshirts.price):0,_=p.filter((e=>"1"===e.print)),g=_.length*s.poster_print.price,N="Paypal"===(h.length>0?h[0].payment_method:"Unknown");let y=x+f+b+g;const v=N?m(y)-y:0;y+=v;const w=s.costs.online;let k=f+w;const A=N?m(k)-k:0;return k+=A,(0,c.jsxs)("div",{className:"p-2 border rounded flex-shrink-0",children:[(0,c.jsx)("h4",{className:"mb-3",children:"Billing Summary"}),(0,c.jsxs)("table",{className:"table table-striped table-hover",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{scope:"col",children:"Description"}),(0,c.jsx)("th",{scope:"col",className:"text-end",children:"Price"})]})}),(0,c.jsxs)("tbody",{children:[t?(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"ps-3 text-muted",children:"Online Conference Registration"}),(0,c.jsxs)("td",{className:"text-end",children:[w.toFixed(2),"€"]})]}):(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{className:"ps-3 text-muted",children:["Conference Registration ","Unknown"!==u?`(${u})`:""]}),(0,c.jsxs)("td",{className:"text-end",children:[x.toFixed(2),"€"]})]}),j.map(((e,t)=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"ps-3 text-muted",children:e.title}),(0,c.jsxs)("td",{className:"text-end",children:[e.price.toFixed(2),"€"]})]},t))),_.length>0&&(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{className:"ps-3 text-muted",children:["Printed Poster",_.length>1?"s":""," x ",_.length]}),(0,c.jsxs)("td",{className:"text-end",children:[g.toFixed(2),"€"]})]}),b>0&&o?.tshirt_size&&(0,c.jsxs)("tr",{children:[(0,c.jsxs)("td",{className:"ps-3 text-muted",children:["T-Shirt (",o.tshirt_size,")"]}),(0,c.jsxs)("td",{className:"text-end",children:[b.toFixed(2),"€"]})]}),N&&(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{className:"ps-3 text-muted",children:"PayPal Fee (3.4% + 0.35€)"}),(0,c.jsxs)("td",{className:"text-end",children:[t?A.toFixed(2):v.toFixed(2),"€"]})]}),(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:(0,c.jsx)("strong",{children:"TOTAL"})}),(0,c.jsx)("td",{className:"text-end",children:(0,c.jsxs)("strong",{children:[t?k.toFixed(2):y.toFixed(2),"€"]})})]})]})]})]})};var h=s(7767),u=s(7762);const x=()=>{const{participantId:e}=(0,h.g)(),[t,s]=(0,i.useState)(!0),[d,m]=(0,i.useState)(null),[x,j]=(0,i.useState)(null),[f,b]=(0,i.useState)([]),[_,g]=(0,i.useState)([]),[N,y]=(0,i.useState)([]),[v,w]=(0,i.useState)([]),[k,A]=(0,i.useState)(""),[S,C]=(0,i.useState)(""),[P,F]=(0,i.useState)((new Date).toISOString().split("T")[0]),[L,M]=(0,i.useState)(""),[E,I]=(0,i.useState)(!1),[O,D]=(0,i.useState)(null),[T,z]=(0,i.useState)(null),W=(0,i.useRef)(!1),$=(0,i.useRef)(!1);(0,i.useRef)(!1);(0,i.useEffect)((()=>{W.current||(W.current=!0,s(!0),n.A.get("https://imc2025.imo.net/php/get_specific_data.php").then((e=>{if(!e.data.success)throw new Error(e.data.message||"Failed to fetch data.");w(e.data.data.workshops||[]),g(e.data.data.payment_methods||[]),y(e.data.data.registration_types||[])})).catch((e=>m(e.message||"An error occurred while fetching data."))).finally((()=>s(!1))))}),[]),(0,i.useEffect)((()=>{W.current&&!$.current&&e&&($.current=!0,s(!0),n.A.get(`https://imc2025.imo.net/php/admin/participant.php?id=${e}`).then((e=>{if(!e.data.success)throw new Error(e.data.message||"Failed to fetch participant data.");j(e.data.data)})).catch((e=>m(e.message))).finally((()=>s(!1))))}),[e,W]),(0,i.useEffect)((()=>{e&&n.A.get(`https://imc2025.imo.net/php/get_participant_payments.php?id=${e}`).then((e=>{if(!e.data.success)throw new Error(e.data.message||"Failed to fetch payments.");b(e.data.data.payments||[])})).catch((e=>m(e.message)))}),[e]);const R=()=>{A(""),C(""),F((new Date).toISOString().split("T")[0]),M(""),z(null)},B="1"===x?.participant?.is_online,V=[{url:"/admin/participants/"+(B?"online":"onsite"),name:B?"Online Participants":"Onsite Participants"},{url:`/admin/participants/${B?"online":"onsite"}/payment/${e}`,name:`${x?.participant?.first_name||"Participant"} ${x?.participant?.last_name||""}'s Payments`}];return(0,c.jsxs)(a.A,{breadcrumb:V,children:[t&&(0,c.jsx)(l.A,{}),!t&&d&&(0,c.jsx)("div",{className:"alert alert-danger",children:d}),O&&(0,c.jsx)("div",{className:"alert alert-success",children:O}),!t&&x&&(0,c.jsxs)("div",{className:"d-flex flex-column flex-md-row gap-3 align-items-start",children:[(0,c.jsxs)("div",{className:"flex-grow-1",children:[(0,c.jsxs)("div",{className:"border p-3 rounded-2",children:[(0,c.jsx)("h4",{className:"mb-3",children:T?"Edit Payment":"Add a New Payment"}),(0,c.jsxs)("form",{onSubmit:async t=>{if(t.preventDefault(),!k||isNaN(k)||parseFloat(k)<=0)m("Please enter a valid payment amount.");else if(S){I(!0),m(null),D(null);try{let t;if(t=T?await n.A.put("https://imc2025.imo.net/php/update_payment.php",{payment_id:T.id,amount:parseFloat(k),payment_method_id:S,payment_date:P,admin_note:L||null},{headers:{"Content-Type":"application/json"}}):await n.A.post("https://imc2025.imo.net/php/add_payment.php",{participant_id:e,amount:parseFloat(k),payment_method_id:S,payment_date:P,admin_note:L||null},{headers:{"Content-Type":"application/json"}}),!t.data.success)throw new Error(t.data.message||"Failed to process payment.");D(T?"Payment updated successfully!":"Payment added successfully!"),b((e=>T?e.map((e=>e.id===T.id?t.data.new_payment:e)):[...e,t.data.new_payment])),R()}catch(e){m(e.message)}finally{I(!1)}}else m("Please select a payment method.")},children:[(0,c.jsxs)("div",{className:"mb-3 row",children:[(0,c.jsx)("label",{className:"col-sm-3 col-form-label fw-bold",children:"Amount (€)"}),(0,c.jsx)("div",{className:"col-sm-5",children:(0,c.jsx)("input",{type:"number",className:o()("form-control",r.A.md50),value:k,onChange:e=>A(e.target.value),min:"0",step:"0.01",required:!0})})]}),(0,c.jsxs)("div",{className:"mb-3 row",children:[(0,c.jsx)("label",{className:"col-sm-3 col-form-label fw-bold",children:"Pay. Method"}),(0,c.jsx)("div",{className:"col-sm-6",children:(0,c.jsxs)("select",{className:"form-select",value:S,onChange:e=>C(e.target.value),required:!0,children:[(0,c.jsx)("option",{value:"",children:"Select a payment method"}),_.map((e=>(0,c.jsx)("option",{value:e.id,children:e.method},e.id)))]})})]}),(0,c.jsxs)("div",{className:"mb-3 row",children:[(0,c.jsx)("label",{className:"col-sm-3 col-form-label fw-bold",children:"Payment Date"}),(0,c.jsx)("div",{className:"col-sm-6",children:(0,c.jsx)("input",{type:"date",className:"form-control",value:P,onChange:e=>F(e.target.value),required:!0})})]}),(0,c.jsxs)("div",{className:"mb-3 row",children:[(0,c.jsx)("label",{className:"col-sm-3 col-form-label fw-bold",children:"Admin Note (Optional)"}),(0,c.jsx)("div",{className:"col-sm-9",children:(0,c.jsx)("textarea",{className:"form-control",value:L,onChange:e=>M(e.target.value),rows:"2"})})]}),(0,c.jsx)("div",{className:"text-end",children:(0,c.jsx)("button",{type:"submit",className:"btn btn-outline-primary fw-bolder",children:E?"Processing...":T?"Update Payment":"Add Payment"})})]})]}),(0,c.jsx)("h5",{className:"mt-4",children:"Previous Payments"}),f.length>0?(0,c.jsxs)("table",{className:"table table-bordered table-striped",children:[(0,c.jsx)("thead",{children:(0,c.jsxs)("tr",{children:[(0,c.jsx)("th",{children:"Date"}),(0,c.jsx)("th",{children:"Amount (€)"}),(0,c.jsx)("th",{children:"Method"}),(0,c.jsx)("th",{children:"Admin Note"})]})}),(0,c.jsx)("tbody",{children:f.map((e=>(0,c.jsxs)("tr",{children:[(0,c.jsx)("td",{children:e.payment_date||"N/A"}),(0,c.jsx)("td",{children:parseFloat(e.amount).toFixed(2)}),(0,c.jsx)("td",{children:e.payment_method}),(0,c.jsx)("td",{children:e.admin_note||"No note"})]},e.id)))})]}):(0,c.jsx)("p",{children:"No payments recorded."})]}),(0,c.jsx)(p,{isOnline:B,conferenceData:u.p,participantData:x,workshops:v,registrationTypes:N,paymentMethods:_})]})]})}},7762:(e,t,s)=>{s.d(t,{p:()=>a});const a=JSON.parse('{"year":2025,"num":"44th","welcome":"Welkom!","thank_you":"Bedankt!","name":"IMC","name_display":"International Meteor Conference","dates":{"start":"2025-09-18","end":"2025-09-21"},"location":"Soest, the Netherlands","consulat":"Dutch consulate","deadlines":{"reg":"2025-07-15","paper":"2025-10-31","full_reimbursement_before":"2025-05-01","half_reimbursement_before":"2025-07-15","early_birds":"2025-05-01"},"poster_dim":"A1 size (59.4cm x 84.1cm / 23.4″ x 33.1″)","poster_print":{"desc":"Maximum size A1 (59.4cm x 84.1cm / 23.4″ x 33.1″), uploaded in PDF, deadline for sending September 1.","price":35,"size":"A1 size (59.4cm x 84.1cm / 23.4″ x 33.1″)"},"sessions":["Video meteor work","Radio meteor work","Visual meteor work","Meteor physics and dynamics","Meteor stream analyses and modelling","Meteor related software and hardware","Ongoing meteor work","Miscellaneous"],"costs":{"after_early_birds":30,"admin":"15€","online":20,"rooms":[{"price":250,"description":"Quadruple room in the IMC host","number":68,"type":"quadruple"},{"price":350,"description":"Double room in the IMC host","number":12,"type":"double"},{"price":500,"description":"Single room in the IMC host","number":8,"type":"single"},{"price":200,"description":"No accommodation","type":"no"}],"tshirts":{"models":["men","women"],"sizes":["S","M","L","XL","XXL"],"price":15},"printed_proceedings":20},"co_organizer":[{"abbr":"IMO","name":"International meteor organization","website":"https://imo.net"},{"abbr":"WGM","name":"KNVWS Meteor Section","website":"https://werkgroepmeteoren.nl/english"}],"workshops":[{"title":"Spectroscopy Workshop","date":"2025-09-18","period":"09:30 to 12:30 CEST","cost":22.5,"description":"including coffee break and lunch","email_to":{"name":"Joe Zender","email":"joe.zender@esa.int"}},{"title":"Radio Workshop","date":"2025-09-17","period":"09:30 to 17:00 CEST","cost":26.5,"cost_online":5,"description":"including coffee break and lunch","email_to":{"name":"Hervé Lamy","email":"herve.lamy@aeronomie.be"}}]}')},1280:(e,t,s)=>{s.d(t,{_v:()=>a});const a=e=>{e&&e.stopPropagation()}},1358:(e,t,s)=>{s.d(t,{A:()=>a});const a={maxW:"index-module__maxW--mmux8"}},8232:(e,t,s)=>{s.d(t,{A:()=>a});const a={root:"form-module__root--TEo3k","is-admin":"form-module__is-admin--CEfAJ",xSmallW:"form-module__xSmallW--P4BEz",smallW:"form-module__smallW--lV3G2",mdAuto:"form-module__mdAuto--nAWF4",md50:"form-module__md50--tAHPE",balance:"form-module__balance--IEzdN",deleteBtn:"form-module__deleteBtn--ynTR8",gdpr:"form-module__gdpr--VLq_3"}},3464:(e,t,s)=>{e.exports=s.p+"702c5653d2360537e78f.svg"}}]);