"use strict";(self.webpackChunkimc2025=self.webpackChunkimc2025||[]).push([[2029],{9963:(e,t,a)=>{a.r(t),a.d(t,{default:()=>S});var s=a(1083),r=a(6540),i=a(9785),n=a(7767),l=a(6328),o=a(6538),c=a(5680),p=a(476),m=a(6645),d=a(4567),u=a(6505),h=a(2337),g=a(4668),y=a(3975),b=a(7762),x=a(4976),f=a(914),j=a(4157),w=a(4972),N=a(4493),_=a(7234),k=a(4848);const S=()=>{const e=(0,n.zy)(),t="1"===new URLSearchParams(e.search).get("debug"),[a,S]=(0,r.useState)({teamEmailSent:null,participantEmailSent:null,error:null}),[C,v]=(0,r.useState)(null),[D,B]=(0,r.useState)(!1),[M,E]=(0,r.useState)(null),[I,T]=(0,r.useState)(0),[A,O]=(0,r.useState)(""),[P,R]=(0,r.useState)(1),[V,F]=(0,r.useState)(null),[$,W]=(0,r.useState)(0),{workshops:L,paymentMethods:z,registrationTypes:H,loading:Z,sessions:q,error:Q}=(0,N.Q)(),{participant:G,loading:J,error:K}=(0,w.D)(M),{control:U,register:X,handleSubmit:Y,formState:{errors:ee},getValues:te,setValue:ae,trigger:se,watch:re}=(Z||J||isSaving,K||specificDataError,(0,i.mN)()),ie=new Date<new Date(b.p.deadlines.early_birds);return(0,r.useEffect)((()=>{if(!G||!A)return;(async()=>{try{const e=(0,_.Q1)(G,L,z,H,q),t=(0,_.KB)(G,L,z,H,q,A),a=G.workshops?.filter((e=>"1"===e.attending))||[],s="vperlerin@gmail.com".split(",").map((e=>({email:e,name:"BCC Recipient"}))),r=a.map((async e=>(0,f.Z)({subject:"Workshop Registration",message:`Hey ${e.responsible_name.split(" ")[0]},<br><br>\n                      ${G.participant.first_name} ${G.participant.last_name} (${G.participant.email})\n                      has just registered for the "${e.title}" (<b>ONLINE version</b>).<br>See you,<br>V./<br>`,to:e.responsible_email,toName:e.responsible_name,fromName:"IMC 2025",replyTo:G.participant.email,replyName:G.participant.first_name+" "+G.participant.last_name,bcc:s}))),i=await(0,f.Z)({subject:"New ONLINE IMC Registration",message:e,to:"vperlerin@gmail.com",toName:"IMC 2025 Team",fromName:"IMC 2025",replyTo:"no-reply@imc.net",replyName:"Do not reply",bcc:s}),n=await(0,f.Z)({subject:"New ONLINE IMC Registration",message:t,to:G.participant.email,toName:`${G.participant.first_name} ${G.participant.last_name}`,fromName:"IMC 2025",replyTo:"no-reply@imc.net",replyName:"Do not reply",bcc:s});await Promise.all(r),S({teamEmailSent:i,participantEmailSent:n,error:null})}catch(e){S({teamEmailSent:null,participantEmailSent:null,error:e.message||"Failed to send emails"})}})()}),[G,L,A]),Q?(0,k.jsx)("div",{className:"alert alert-danger fw-bolder",children:Q}):Z||J?(0,k.jsx)(m.A,{}):(0,k.jsxs)(d.A,{title:"Register Online",showRegBtn:!1,children:[C&&(0,k.jsx)("div",{className:"alert alert-danger fw-bolder",children:C}),V&&!C&&(0,k.jsx)("div",{className:"alert alert-success fw-bolder",children:V}),5===P&&V?(0,k.jsx)(k.Fragment,{children:G?(0,k.jsx)(k.Fragment,{children:K?(0,k.jsxs)("div",{className:"alert alert-danger fw-bolder",children:["Database access error. We are sorry, but we couldn't properly record your registration. Please try again or contact us "," ",(0,k.jsx)(x.N_,{"aria-label":"Contact",to:"/contact",title:"Contact",children:"contact us"})," "," for assistance."]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("h2",{children:b.p.thank_you}),(0,k.jsxs)("p",{children:["We just sent you an email with some instructions. This email contains a summary of your information as well as the password required to eventually update your eventual talks.",(0,k.jsx)("br",{}),"If you do not receive this email within the next 20 minutes"," ",(0,k.jsx)(x.N_,{"aria-label":"Contact",to:"/contact",title:"Contact",children:"contact us"})," "," immediately."]}),(0,k.jsxs)("div",{className:"d-flex flex-column flex-md-row gap-3",children:[(0,k.jsxs)("div",{className:"flex-grow-1",children:[(0,k.jsx)("p",{className:"fw-bolder text-danger",children:"The IMC fee is due without any delay."}),"paypal"===(0,l.g)(G.participant.payment_method_id,z)?(0,k.jsxs)("div",{className:"mb-3",children:[(0,k.jsx)("p",{children:"Click the button below to pay immediately with Paypal."}),(0,k.jsx)(u.A,{amount:$+I,year:b.p.year})]}):(0,k.jsxs)(k.Fragment,{children:[(0,k.jsx)("p",{children:(0,k.jsxs)("strong",{children:["  Please, transfer the total amount of ",$,"â‚¬ to confirm your registration immediately."]})}),(0,k.jsxs)("blockquote",{className:"border rounded-2 p-3",children:["International Meteor Organization, Jozef Mattheessensstraat 60, 2540 Hove, Belgium",(0,k.jsx)("br",{}),"Bank account at BNP Paribas Fortis Bank Belgium",(0,k.jsx)("br",{}),"BIC bank code: GEBABEBB",(0,k.jsx)("br",{}),"IBAN account number: BE30 0014 7327 5911",(0,k.jsx)("br",{}),"e-mail: treasurer@imo.net"]})]})]}),(0,k.jsx)(h.A,{isOnline:!1,conferenceData:b.p,participantData:G,workshops:L,registrationTypes:H,paymentMethods:z})]})]})}):(0,k.jsxs)("div",{className:"alert alert-danger fw-bolder",children:["Database access error. We are sorry, but we couldn't properly record your registration. Please try again or  "," ",(0,k.jsx)(x.N_,{"aria-label":"Contact",to:"/contact",title:"Contact",children:"contact us"})," "," for assistance."]})}):(0,k.jsxs)("form",{onSubmit:Y((async e=>{B(!0),v(null),F(null);try{const t="https://imc2025.imo.net/php/api/register_online.php",a={...e,is_early_bird:ie.toString(),is_online:"true",talks:e.talks||[],total_due:$,paypal_fee:I},r=await s.A.post(t,a,{headers:{"Content-Type":"application/json"}});r.data.success?(F(`Registration successful! (ID: ${r.data.participant_id}) `),E(r.data.participant_id),O(r.data.password)):(v(r.data.message||"Something went wrong."),F("Registration successful but we couldn't send you an email"))}catch(e){v("Failed to submit the form. Please try again.")}finally{B(!1)}})),className:"d-flex flex-grow-1 flex-column position-relative",children:[D&&(0,k.jsx)(m.A,{}),(0,k.jsx)("input",{name:"is_online",type:"hidden",value:"true",...X("is_online")}),1===P&&(0,k.jsx)(p.A,{register:X,errors:ee,isOnline:!0,isDebugMode:t,step:P,stepTotal:5,setValue:ae,trigger:se}),2===P&&(0,k.jsx)(c.A,{conferenceData:b.p,control:U,register:X,isDebugMode:t,isOnline:!0,errors:ee,step:P,stepTotal:5,getValues:te,setValue:ae,sessions:q,trigger:se,watch:re}),3===P&&b.p?.workshops?.length>0&&(0,k.jsx)(y.A,{conferenceData:b.p,register:X,errors:ee,isDebugMode:t,isOnline:!0,step:P,stepTotal:5,setValue:ae,trigger:se,watch:re,workshops:L}),4===P&&(0,k.jsx)(o.A,{isOnline:!0,conferenceData:b.p,control:U,register:X,isDebugMode:t,isEarlyBird:ie,paymentMethods:z,errors:ee,registrationTypes:H,step:P,stepTotal:5,setValue:ae,trigger:se}),5===P&&!V&&(0,k.jsx)(g.A,{isOnline:!0,getValues:te,isEarlyBird:ie,conferenceData:b.p,setTotal:W,setPaypalFee:T,showInfo:!V,workshops:L,registrationTypes:H,paymentMethods:z,watch:re}),(0,k.jsx)("div",{className:"mt-auto pt-3",children:(0,k.jsxs)("div",{className:"d-flex gap-3 justify-content-end",children:[P>1&&(0,k.jsxs)("button",{className:"btn btn-outline-primary fw-bolder d-inline-flex align-items-center gap-2",type:"button",onClick:()=>R(P-1),children:[(0,k.jsx)(j.SnO,{style:{strokeWidth:"110px"}})," Back"]}),P<5&&(0,k.jsxs)("button",{className:"btn btn-outline-primary fw-bolder d-inline-flex align-items-center gap-2",type:"button",onClick:async()=>{await se()&&R(P+1)},children:["Continue ",(0,k.jsx)(j.dH8,{style:{strokeWidth:"110px"}})]}),5===P&&(0,k.jsx)("button",{className:"btn btn-primary fw-bolder",type:"submit",children:"Submit"})]})})]})]})}}}]);