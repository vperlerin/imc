"use strict";(self.webpackChunkimc2025=self.webpackChunkimc2025||[]).push([[5558],{
/***/490:
/***/(e,t,a)=>{a.r(t),
/* harmony export */a.d(t,{
/* harmony export */default:()=>A
/* harmony export */});
/* harmony import */var s=a(9066),r=a(1083),i=a(6540),n=a(9785),l=a(7767),o=a(5846),c=a(6538),d=a(9156),p=a(6827),m=a(5680),u=a(5058),h=a(476),g=a(6645),b=a(4567),y=a(6505),x=a(2337),f=a(4668),j=a(3975),w=a(408),_=a(7762),N=a(4976),k=a(914),D=a(4157),S=a(4972),C=a(4493),M=a(7234),v=a(4848);
/* harmony import */const A=()=>{const e=(0,l/* .useLocation */.zy)(),t="1"===new URLSearchParams(e.search).get("debug"),[a,A]=(0,i.useState)({teamEmailSent:null,participantEmailSent:null,error:null}),[T,B]=(0,i.useState)(""),[E,I]=(0,i.useState)(!1),[V,F]=(0,i.useState)(null),[P,R]=(0,i.useState)(0),[O,$]=(0,i.useState)(""),[H,z]=(0,i.useState)(1),[W,q]=(0,i.useState)(null),[G,L]=(0,i.useState)(0),{workshops:Z,paymentMethods:Q,registrationTypes:U,loading:Y,sessions:J,error:K}=(0,C/* .useApiSpecificData */.Q)(),{participant:X,loading:ee,error:te}=(0,S/* .useApiParticipant */.D)(V),ae=Y||ee||E,se=[T,a.error,te,K].filter(Boolean),{control:re,register:ie,handleSubmit:ne,formState:{errors:le},getValues:oe,setValue:ce,trigger:de,watch:pe}=(0,n/* .useForm */.mN)(),me=(e=>{if(!e)return null;const t=new Date(e),a=new Date;let s=a.getFullYear()-t.getFullYear();const r=a.getMonth()-t.getMonth();return(r<0||0===r&&a.getDate()<t.getDate())&&s--,s})(pe("dob")),ue=null!==me&&me<16,he=new Date<new Date(_/* .conferenceData */.p.deadlines.early_birds);return(0,i.useEffect)((()=>{if(!X||!O)return;(async()=>{try{const e=(0,M/* .registrationEmailToTeam */.Q1)(X,Z,Q,U,J),t=(0,M/* .registrationEmailToParticipant */.KB)(X,Z,Q,U,J,O),a=X.workshops?.filter((e=>"1"===e.attending))||[],s="vperlerin@gmail.com".split(",").map((e=>({email:e,name:"BCC Recipient"}))),r=a.map((async e=>(0,k/* .sendEmail */.Z)({subject:"Workshop Registration",message:`Hey ${e.responsible_name.split(" ")[0]},<br><br>\n                      ${X.participant.first_name} ${X.participant.last_name} (${X.participant.email})\n                      has just registered for the "${e.title}" (ON-SITE).<br>See you,<br>V./<br>`,to:e.responsible_email,toName:e.responsible_name,fromName:"IMC 2025",replyTo:X.participant.email,replyName:X.participant.first_name+" "+X.participant.last_name,bcc:s}))),i=await(0,k/* .sendEmail */.Z)({subject:"New On-site IMC Registration",message:e,to:"imc2025@imo.net",toName:"IMC 2025 Team",fromName:"IMC 2025",replyTo:"no-reply@imc.net",replyName:"Do not reply",bcc:s}),n=await(0,k/* .sendEmail */.Z)({subject:"New On-site IMC Registration",message:t,to:X.participant.email,toName:`${X.participant.first_name} ${X.participant.last_name}`,fromName:"IMC 2025",replyTo:"no-reply@imc.net",replyName:"Do not reply",bcc:s});await Promise.all(r),A({teamEmailSent:i,participantEmailSent:n,error:null})}catch(e){A({teamEmailSent:null,participantEmailSent:null,error:e.message||"Failed to send emails"})}})()}),[X,Z,O]),ae?(0/* ["default"] */,v.jsx)(g.A,{}):(0/* ["default"] */,v.jsxs)(b.A,{title:"Register On site",showRegBtn:!1,children:[se.length>0&&(0,v.jsxs)("div",{className:"alert alert-danger fw-bolder",children:[(0,v.jsx)("ul",{className:"mb-0",children:se.map(((e,t)=>(0,v.jsx)("li",{children:e},t)))}),(0,v.jsxs)("div",{className:"mt-2",children:["If you think this is a mistake please try again or "," "," ",(0/* .Link */,v.jsx)(N.N_,{"aria-label":"Contact",to:"/contact",title:"Contact",children:"contact us"}),"."]})]}),8===H&&(0,v.jsx)(v.Fragment,{children:X&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("h2",{children:_/* .conferenceData */.p.thank_you}),W&&!T&&(0,v.jsx)("div",{className:"alert alert-success fw-bolder",children:W}),(0,v.jsxs)("p",{className:"fw-bolder",children:["We just sent you an email with some instructions. This email contains a summary of your information as well as the password required to eventually update your travel details and your contributions (talks & posters). If you do not receive this email within the next 20 minutes"," ",(0/* .Link */,v.jsx)(N.N_,{"aria-label":"Contact",to:"/contact",title:"Contact",children:"contact us"})," "," immediately."]}),(0,v.jsxs)("div",{className:"d-flex flex-column flex-md-row gap-3",children:[(0,v.jsxs)("div",{className:"flex-grow-1",children:[(0,v.jsx)("p",{className:"fw-bolder text-danger",children:"The IMC fee is due without any delay."}),"paypal"===X.participant.payment_method_name.toLowerCase?(0,v.jsxs)("div",{className:"mb-3",children:[(0,v.jsx)("p",{children:"Click the button below to pay immediately with Paypal."}),(0/* ["default"] */,v.jsx)(y.A,{amount:G+P,year:_/* .conferenceData */.p.year})]}):(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("p",{children:(0,v.jsxs)("strong",{children:["  Please, transfer the total amount of ",G,"€ to confirm your registration immediately."]})}),(0,v.jsxs)("blockquote",{className:"border rounded-2 p-3",children:["International Meteor Organization, Jozef Mattheessensstraat 60, 2540 Hove, Belgium",(0,v.jsx)("br",{}),"Bank account at BNP Paribas Fortis Bank Belgium",(0,v.jsx)("br",{}),"BIC bank code: GEBABEBB",(0,v.jsx)("br",{}),"IBAN account number: BE30 0014 7327 5911",(0,v.jsx)("br",{}),"e-mail: treasurer@imo.net"]})]})]}),(0/* ["default"] */,v.jsx)(x.A,{isOnline:!1,conferenceData:_/* .conferenceData */.p,participantData:X,workshops:Z,registrationTypes:U,paymentMethods:Q})]})]})}),!X&&!ae&&(0,v.jsxs)("form",{onSubmit:ne((async e=>{I(!0),B(null),q(null);try{const t="https://imc2025.imo.net/php/api/register_onsite.php",a={...e,is_early_bird:he.toString(),is_online:"false",talks:e.talks||[],posters:e.posters||[],total_due:G.toFixed(2),paypal_fee:P?.toFixed(2)||0},s=await r/* ["default"] */.A.post(t,a,{headers:{"Content-Type":"application/json"}});s.data.success?(q(`Registration successful! (ID: ${s.data.participant_id}) `),F(s.data.participant_id),$(s.data.password)):(B(s.data.message||"Something went wrong."),q("Registration successful but we couldn't send you an email"))}catch(e){B("Failed to submit the form. Please try again.")}finally{I(!1)}})),className:"d-flex flex-grow-1 flex-column position-relative",children:[E&&(0/* ["default"] */,v.jsx)(g.A,{}),(0,v.jsx)("input",{name:"is_early_bird",type:"hidden",value:he,...ie("is_early_bird")}),(0,v.jsx)("input",{name:"is_online",type:"hidden",value:"false",...ie("is_online")}),1===H&&(0,v.jsxs)(v.Fragment,{children:[(0,v.jsxs)("p",{className:"border rounded-2 p-3",children:[(0,v.jsx)("b",{children:"People who need an invitation letter for Visa"})," must send their request without any delay to imc",_/* .conferenceData */.p.year,"@imo.net. Please, provide your legal private domicile or professional address, passport number and the address of the ",_/* .conferenceData */.p.consulate," where your visa application will be submitted."]}),new Date<new Date(_/* .conferenceData */.p.deadlines.early_birds)&&(0,v.jsxs)("p",{className:"d-flex border rounded-2 p-3 border-info text-info gap-2 mb-5",children:[(0/* .CiWarning */,v.jsx)(w.tP6,{className:s/* ["default"] */.A.warning}),(0,v.jsxs)("span",{children:[(0,v.jsxs)("span",{className:"d-block fw-bolder",children:["Hurry up! After ",(0/* .conferenceData */,o/* .formatFullDate */.Lu)(_.p.deadlines.early_birds),", a late booking fee of ",_/* .conferenceData */.p.costs.after_early_birds,"€ is added to the registration fee"]}),(0,v.jsx)("small",{children:"— because the early birds got the discount, and the latecomers just get the worms (and a fee :)."})]})]})]}),1===H&&(0/* ["default"] */,v.jsx)(h.A,{register:ie,errors:le,isDebugMode:t,step:H,stepTotal:8,setValue:ce,trigger:de}),2===H&&_/* .conferenceData */.p?.workshops?.length>0&&(0/* ["default"] */,v.jsx)(j.A,{conferenceData:_/* .conferenceData */.p,register:ie,errors:le,isDebugMode:t,step:H,stepTotal:8,setValue:ce,trigger:de,watch:pe,workshops:Z}),3===H&&(0/* ["default"] */,v.jsx)(d.A,{conferenceData:_/* .conferenceData */.p,register:ie,errors:le,isDebugMode:t,step:H,stepTotal:8,setValue:ce,trigger:de}),4===H&&(0/* ["default"] */,v.jsx)(m.A,{conferenceData:_/* .conferenceData */.p,control:re,register:ie,isDebugMode:t,errors:le,step:H,stepTotal:8,getValues:oe,setValue:ce,sessions:J,trigger:de,watch:pe}),5===H&&(0/* ["default"] */,v.jsx)(c.A,{conferenceData:_/* .conferenceData */.p,control:re,register:ie,isDebugMode:t,isEarlyBird:he,paymentMethods:Q,errors:le,registrationTypes:U,step:H,stepTotal:8,setValue:ce,trigger:de}),6===H&&(0/* ["default"] */,v.jsx)(u.A,{conferenceData:_/* .conferenceData */.p,register:ie,errors:le,isDebugMode:t,step:H,stepTotal:8,setValue:ce,trigger:de,watch:pe,control:re}),7===H&&(0/* ["default"] */,v.jsx)(p.A,{register:ie,errors:le,isDebugMode:t,isUnder16:ue,showGdpr:!0,step:H,stepTotal:8,setValue:ce,trigger:de}),8===H&&!W&&(0/* ["default"] */,v.jsx)(f.A,{isOnline:!1,getValues:oe,isEarlyBird:he,conferenceData:_/* .conferenceData */.p,setTotal:L,setPaypalFee:R,showInfo:!W,workshops:Z,registrationTypes:U,paymentMethods:Q,watch:pe}),(0,v.jsx)("div",{className:"mt-auto pt-3",children:(0,v.jsxs)("div",{className:"d-flex gap-3 justify-content-end",children:[H>1&&(0,v.jsxs)("button",{className:"btn btn-outline-primary fw-bolder d-inline-flex align-items-center gap-2",type:"button",onClick:()=>z(H-1),children:[(0/* .SlArrowLeft */,v.jsx)(D.SnO,{style:{strokeWidth:"110px"}})," Back"]}),H<8&&(0,v.jsxs)("button",{className:"btn btn-outline-primary fw-bolder d-inline-flex align-items-center gap-2",type:"button",onClick:async()=>{await de()&&z(H+1)},children:["Continue ",(0/* .SlArrowRight */,v.jsx)(D.dH8,{style:{strokeWidth:"110px"}})]}),8===H&&(0,v.jsx)("button",{className:"btn btn-primary fw-bolder",type:"submit",children:"Submit"})]})})]})]})}}
/***/,
/***/9066:
/***/(e,t,a)=>{
/* harmony export */a.d(t,{
/* harmony export */A:()=>s
/* harmony export */});
// extracted by mini-css-extract-plugin
/* harmony default export */const s={root:"index-module__root--arE76","is-admin":"index-module__is-admin--SeEAz",warning:"index-module__warning--GHhh2"};
/***/}}]);