"use strict";(self.webpackChunkimc2025=self.webpackChunkimc2025||[]).push([[4592],{4972:(e,a,t)=>{t.d(a,{D:()=>i});var r=t(3318),s=t(6540),l=t(1083);const i=function(e){let a=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0;const[t,i]=(0,s.useState)(null),[n,o]=(0,s.useState)(!1),[c,d]=(0,s.useState)(null),u=(0,s.useCallback)((async()=>{if(e){o(!0),d(null);try{const a=await(0,r.L)((()=>l.A.get(`https://imc2025.imo.net/php/api/get_participant.php?id=${e}`)));if(!a.data.success||!a.data.data)throw new Error(a.data.message||"Participant not found.");i(a.data.data)}catch(e){d(e.message||"Failed to fetch participant data.")}finally{o(!1)}}}),[e]);return(0,s.useEffect)((()=>{u()}),[u,a]),{participant:t,loading:n,error:c,setParticipant:i,refetchParticipant:u}}},4493:(e,a,t)=>{t.d(a,{Q:()=>i});var r=t(3318),s=t(6540),l=t(1083);const i=()=>{const[e,a]=(0,s.useState)([]),[t,i]=(0,s.useState)([]),[n,o]=(0,s.useState)([]),[c,d]=(0,s.useState)([]),[u,p]=(0,s.useState)(!0),[m,h]=(0,s.useState)(null);return(0,s.useEffect)((()=>{(async()=>{try{const e=await(0,r.L)((()=>l.A.get("https://imc2025.imo.net/php/get_specific_data.php")));if(!e.data.success)throw new Error(e.data.message||"Failed to fetch specific IMC data. Please, refresh the page.");a(e.data.data.workshops||[]),i(e.data.data.payment_methods||[]),o(e.data.data.registration_types||[]),d(e.data.data.sessions||[])}catch(e){h(e.message||"Failed to fetch specific IMC data. Please, refresh the page.")}finally{p(!1)}})()}),[]),{workshops:e,paymentMethods:t,registrationTypes:n,sessions:c,loading:u,error:m}}},9156:(e,a,t)=>{t.d(a,{A:()=>u});var r=t(6942),s=t.n(r),l=t(8232),i=(t(6540),t(2834)),n=t(5846),o=t(4848);const c=Array.from({length:24},((e,a)=>a.toString().padStart(2,"0"))),d=Array.from({length:6},((e,a)=>(10*a).toString().padStart(2,"0"))),u=e=>{let{isAdmin:a=!1,isEditing:t=!1,conferenceData:r,register:u,errors:p,isDebugMode:m=!1,step:h,stepTotal:v,trigger:g,setValue:f}=e;const b=(x=r.dates.start,j=r.dates.end,Array.from({length:(new Date(j)-new Date(x))/864e5+1},((e,a)=>{const t=new Date(x);return t.setDate(t.getDate()+a),{value:t.toISOString().split("T")[0],label:(0,n.Lu)(t.toISOString().split("T")[0],!1,!1)}})));var x,j;return(0,o.jsxs)(o.Fragment,{children:[!a&&!t&&(0,o.jsxs)("h4",{className:"mb-3 border-bottom pb-2",children:[(0,o.jsx)(i.A,{step:h,stepTotal:v}),"Travel Details"]}),t&&(0,o.jsx)("h4",{className:"mb-3 border-bottom pb-2",children:"Update your Travel Details"}),(0,o.jsxs)("div",{className:s()(l.A.smallW,"mx-auto position-relative"),children:[m&&(0,o.jsx)("button",{type:"button",className:"position-absolute top-0 end-0 btn btn-secondary",onClick:()=>{f("arrival_date",b[0].value),f("arrival_hour","14"),f("arrival_minute","30"),f("departure_date",b[b.length-1].value),f("departure_hour","12"),f("departure_minute","00"),f("travelling","train"),f("travelling_details","I will be alone in my train."),g()},children:"Fill Test Data"}),!a&&!t&&(0,o.jsxs)("p",{className:"fw-bolder",children:["If you plan to arrive before ",b[0].label,", you must arrange your own accommodation."]}),(0,o.jsxs)("div",{className:l.A.smallW,children:[(0,o.jsxs)("div",{className:"mb-3 row align-items-center",children:[(0,o.jsx)("label",{className:"col-sm-3 col-form-label fw-bold",children:"Arrival"}),(0,o.jsxs)("div",{className:"col-sm-9 d-flex align-items-center gap-1",children:[(0,o.jsxs)("select",{className:s()("form-select me-2",p.arrival_date&&"is-invalid"),...u("arrival_date",{required:"Arrival date is required"}),onBlur:()=>g("arrival_date"),children:[(0,o.jsx)("option",{value:"",children:"Select Arrival Date"}),b.map((e=>{let{value:a,label:t}=e;return(0,o.jsx)("option",{value:a,children:t},a)}))]}),(0,o.jsxs)("select",{className:s()("form-select w-auto",p.arrival_hour&&"is-invalid"),...u("arrival_hour",{required:"Hour is required"}),onBlur:()=>g("arrival_hour"),children:[(0,o.jsx)("option",{value:"",children:"Hour"}),c.map((e=>(0,o.jsx)("option",{value:e,children:e},e)))]}),":",(0,o.jsxs)("select",{className:s()("form-select w-auto",p.arrival_minute&&"is-invalid"),...u("arrival_minute",{required:"Minute is required"}),onBlur:()=>g("arrival_minute"),children:[(0,o.jsx)("option",{value:"",children:"Min"}),d.map((e=>(0,o.jsx)("option",{value:e,children:e},e)))]})]}),p.arrival_date&&(0,o.jsx)("p",{className:"text-danger mb-0",children:(0,o.jsx)("small",{children:p.arrival_date.message})})]}),(0,o.jsxs)("div",{className:"mb-3 row align-items-center",children:[(0,o.jsx)("label",{className:"col-sm-3 col-form-label fw-bold",children:"Departure"}),(0,o.jsxs)("div",{className:"col-sm-9 d-flex align-items-center gap-1",children:[(0,o.jsxs)("select",{className:s()("form-select me-2",p.departure_date&&"is-invalid"),...u("departure_date",{required:"Departure date is required"}),onBlur:()=>g("departure_date"),children:[(0,o.jsx)("option",{value:"",children:"Select Departure Date"}),b.map((e=>{let{value:a,label:t}=e;return(0,o.jsx)("option",{value:a,children:t},a)}))]}),(0,o.jsxs)("select",{className:s()("form-select w-auto",p.departure_hour&&"is-invalid"),...u("departure_hour",{required:"Hour is required"}),onBlur:()=>g("departure_hour"),children:[(0,o.jsx)("option",{value:"",children:"Hour"}),c.map((e=>(0,o.jsx)("option",{value:e,children:e},e)))]}),":",(0,o.jsxs)("select",{className:s()("form-select w-auto",p.departure_minute&&"is-invalid"),...u("departure_minute",{required:"Minute is required"}),onBlur:()=>g("departure_minute"),children:[(0,o.jsx)("option",{value:"",children:"Min"}),d.map((e=>(0,o.jsx)("option",{value:e,children:e},e)))]})]}),p.departure_date&&(0,o.jsx)("p",{className:"text-danger mb-0",children:(0,o.jsx)("small",{children:p.departure_date.message})})]}),(0,o.jsxs)("div",{className:"mb-3 row",children:[(0,o.jsx)("label",{className:"col-sm-3 col-form-label fw-bold",children:"Travelling by"}),(0,o.jsxs)("div",{className:"col-sm-9",children:[(0,o.jsxs)("select",{className:s()("form-select",p.travelling&&"is-invalid",l.A.mdAuto),...u("travelling",{required:"Mode of Transportation is required"}),onBlur:()=>g("travelling"),children:[(0,o.jsx)("option",{value:"",children:"Select a Mode of Transportation"}),(0,o.jsx)("option",{value:"car",children:"Car"}),(0,o.jsx)("option",{value:"bus",children:"Bus"}),(0,o.jsx)("option",{value:"plane",children:"Plane"}),(0,o.jsx)("option",{value:"train",children:"Train"}),(0,o.jsx)("option",{value:"local",children:"Local Resident"}),(0,o.jsx)("option",{value:"undecided",children:"Not yet decided"})]}),p.travelling&&(0,o.jsx)("p",{className:"text-danger mb-0",children:(0,o.jsx)("small",{children:p.travelling.message})})]})]}),(0,o.jsxs)("div",{className:"mb-3 row",children:[(0,o.jsx)("label",{className:"col-sm-3 col-form-label fw-bold",children:"Travel Details"}),(0,o.jsx)("div",{className:"col-sm-9",children:(0,o.jsx)("textarea",{className:"form-control",rows:"3",...u("travelling_details"),onBlur:()=>g("travelling_details")})})]})]})]})]})}},2199:(e,a,t)=>{t.d(a,{V:()=>l});var r=t(6540),s=t(7767);const l=e=>{const a=(0,s.Zp)(),t=(0,s.zy)();(0,r.useEffect)((()=>{const a=a=>{e&&(a.preventDefault(),a.returnValue="You have unsaved changes. Do you really want to leave?")};return window.addEventListener("beforeunload",a),()=>{window.removeEventListener("beforeunload",a)}}),[e]),(0,r.useEffect)((()=>{const r=r=>{if(e){window.confirm("You have unsaved changes. Do you really want to leave?")||(r.preventDefault(),a(t.pathname,{replace:!0}))}};return window.addEventListener("popstate",r),()=>{window.removeEventListener("popstate",r)}}),[e,a,t.pathname])}},8495:(e,a,t)=>{t.r(a),t.d(a,{default:()=>j});var r=t(9156),s=t(5680),l=t(6645),i=t(4567),n=t(6942),o=t.n(n),c=t(6540),d=t(7762),u=t(8983),p=t(4976),m=t(4972),h=t(4493),v=t(9785),g=t(1448),f=t(2199),b=t(5619),x=t(4848);const j=()=>{const e=(0,g.wA)(),[a,t]=(0,c.useState)(null),[n,j]=(0,c.useState)(""),[w,y]=(0,c.useState)(""),[N,_]=(0,c.useState)(!1),[S,D]=(0,c.useState)(null),[A,E]=(0,c.useState)(!1),[T,k]=(0,c.useState)(0),C=(0,c.useRef)(!1),q=(0,g.d4)(u.Pg.getUser),{control:L,register:P,handleSubmit:M,getValues:B,setValue:F,formState:{errors:I},reset:V,trigger:O,watch:H}=(0,v.mN)(),{participant:$,loading:U}=(0,m.D)(S,T),{loading:Y,sessions:Q}=(0,h.Q)(),{logout:R,loading:W}=(0,b.M)();(0,f.V)(A),(0,c.useEffect)((()=>{const e=H((()=>E(!0)));return()=>e.unsubscribe()}),[H]),(0,c.useEffect)((()=>{q||e((0,u.im)())}),[e,q]),(0,c.useEffect)((()=>{q?.id&&D(q.id)}),[q]),(0,c.useEffect)((()=>{if(!$||0===Q.length||C.current)return;C.current=!0,$.arrival&&Object.keys($.arrival).forEach((e=>{null!==$.arrival[e]&&F(e,e.includes("hour")||e.includes("minute")?$.arrival[e].toString().padStart(2,"0"):$.arrival[e])}));const e=$.contributions||[],a=e.filter((e=>"talk"===e.type)).map((e=>({...e||Q[0]?.id}))),t=e.filter((e=>"poster"===e.type)).map((e=>({...e||Q[0]?.id})));F("talks",a),F("posters",t),console.log("UDPATED TALKS ",a)}),[$,Q,F]);return(0,x.jsxs)(i.A,{title:"Update Your Data",children:[(U||Y)&&(0,x.jsx)(l.A,{text:"Fetching your recordâ€¦ Please wait."}),$&&!U&&(0,x.jsxs)(x.Fragment,{children:[(0,x.jsxs)("div",{className:"border rounded-2 p-3 mb-3",children:[(0,x.jsx)("p",{className:"fw-bolder",children:`Hello ${$.participant.title} ${$.participant.first_name} ${$.participant.last_name},`}),(0,x.jsxs)("p",{children:["On this page, you have the option to update either your travel details or contributions (talks & posters). If you need to make any other changes to your records, please"," ",(0,x.jsx)(p.N_,{"aria-label":"Contact",to:"/contact",title:"Contact",children:"contact us"}),"."]}),(0,x.jsxs)("div",{className:"d-flex gap-2 mb-2",children:[(0,x.jsx)("button",{className:o()("btn fw-bolder","arrival"===a?"btn-primary":"btn-outline-primary"),onClick:()=>t("arrival"===a?null:"arrival"),children:"Travel Details"}),(0,x.jsx)("button",{className:o()("btn fw-bolder","contributions"===a?"btn-primary":"btn-outline-primary"),onClick:()=>t("contributions"===a?null:"contributions"),children:"Contributions"})]}),n&&(0,x.jsx)("div",{className:"alert alert-danger fw-bolder mt-3",children:n}),w&&(0,x.jsxs)("div",{className:"alert alert-success fw-bolder mt-3",children:[w,(0,x.jsx)("button",{"aria-label":"Logout",className:"btn btn-outline-danger px-3 fw-bolder ms-3",onClick:R,disabled:W,title:"Logout",children:W?"Logging out...":"Logout"})]})]}),!!a&&(0,x.jsx)("div",{className:"mt-2 position-relative",children:(0,x.jsxs)("form",{onSubmit:M((async e=>{if(S){_(!0),E(!1),j(""),y("");try{const t="arrival"===a?"update_arrival":"update_contribution",r=await fetch(`https://imc2025.imo.net/php/api/${t}.php`,{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify({participant_id:S,...e})}),s=await r.json();if(!s.success)throw new Error(s.message||"Failed to update data.");y("Your changes have been saved successfully! If you don't have other updates to make, please don't forget to "),k((e=>e+1))}catch(e){j("An error occurred while saving your data. Please, try again later or contact us.")}finally{_(!1)}}else alert("Error: Participant ID is missing. Please refresh the page and try again.")})),children:[N&&(0,x.jsx)(l.A,{isFixed:!1}),"arrival"===a&&(0,x.jsx)(r.A,{isEditing:!0,conferenceData:d.p,register:P,errors:I,setValue:F,trigger:O}),"contributions"===a&&(0,x.jsx)(s.A,{isEditing:!0,conferenceData:d.p,control:L,register:P,errors:I,getValues:B,setValue:F,watch:H,trigger:O,sessions:Q}),(0,x.jsx)("div",{className:"mt-4 d-flex justify-content-end",children:(0,x.jsx)("button",{type:"submit",className:"btn btn-outline-primary fw-bolder",disabled:N,children:N?"Saving...":"Save Changes"})})]})})]})]})}}}]);